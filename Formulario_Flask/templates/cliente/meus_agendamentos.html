{% extends "base.html" %}
{% block title %}Meus Agendamentos - {{ barbearia.nome }}{% endblock %}

{% block content %}
<!-- Navega√ß√£o -->
<nav class="custom-nav">
    <div class="nav-content">
        <div class="nav-brand" style="display: flex; align-items: center; gap: 1rem;">
            {% if barbearia.logo %}
            <img src="{{ url_for('static', filename='uploads/logos/' + barbearia.logo) }}" 
                 alt="{{ barbearia.nome }}" 
                 style="height: 90px; width: auto; 
                        filter: drop-shadow(0 0 15px rgba(0, 150, 255, 0.5)) drop-shadow(0 2px 10px rgba(0, 150, 255, 0.3)) brightness(1.1); 
                        transition: all 0.3s ease;"
                 onmouseover="this.style.transform='scale(1.1) rotate(5deg)'; this.style.filter='drop-shadow(0 0 25px rgba(0, 150, 255, 0.8)) drop-shadow(0 5px 20px rgba(0, 150, 255, 0.5)) brightness(1.2)'"
                 onmouseout="this.style.transform='scale(1) rotate(0deg)'; this.style.filter='drop-shadow(0 0 15px rgba(0, 150, 255, 0.5)) drop-shadow(0 2px 10px rgba(0, 150, 255, 0.3)) brightness(1.1)'">
            {% endif %}
            <span>{{ barbearia.nome|upper }}</span>
        </div>
        
        <!-- Bot√£o Hamb√∫rguer -->
        <div class="nav-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <ul class="nav-list">
            <li><a href="{{ url_for('nova_reserva', slug=barbearia.slug) }}" class="nav-link">NOVO AGENDAMENTO</a></li>
            <li><a href="{{ url_for('dashboard', slug=barbearia.slug) }}" class="nav-link">DASHBOARD</a></li>
            <li><a href="{{ url_for('logout', slug=barbearia.slug) }}" class="nav-link">SAIR</a></li>
        </ul>
    </div>
</nav>

<div class="custom-container">
    <h1 style="text-align: center; margin-bottom: 3rem;">üìÖ MEUS AGENDAMENTOS</h1>

    {% if reservas %}
        <div class="grid" style="gap: 2rem;">
            {% for reserva in reservas %}
            <div class="dashboard-card" style="border-left: 5px solid var(--gold);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--gold);">
                        {% if reserva.data is string %}
                            {{ reserva.data }}
                        {% else %}
                            {{ reserva.data.strftime('%d/%m/%Y') }}
                        {% endif %}
                    </div>
                    <div class="status-badge status-ok">
                        ‚úì CONFIRMADO
                    </div>
                </div>

                <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; color: rgba(245, 245, 220, 0.9);">
                        <span style="font-size: 1.2rem;">üïê</span>
                        <span style="font-size: 1.1rem; font-weight: 600;">{{ reserva.hora_inicio }} - {{ reserva.hora_fim }}</span>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 1rem; color: rgba(245, 245, 220, 0.9);">
                        <span style="font-size: 1.2rem;">‚úÇÔ∏è</span>
                        <span style="font-size: 1.1rem;">{{ reserva.servico.nome if reserva.servico else 'Servi√ßo' }}</span>
                    </div>
                    
                    {% if reserva.servico and reserva.servico.preco %}
                    <div style="display: flex; align-items: center; gap: 1rem; color: rgba(245, 245, 220, 0.9);">
                        <span style="font-size: 1.2rem;">üí∞</span>
                        <span style="font-size: 1.1rem; color: var(--gold-light);">R$ {{ "%.2f"|format(reserva.servico.preco) }}</span>
                    </div>
                    {% endif %}
                    
                    {% if reserva.servico and reserva.servico.duracao %}
                    <div style="display: flex; align-items: center; gap: 1rem; color: rgba(245, 245, 220, 0.9);">
                        <span style="font-size: 1.2rem;">‚è±Ô∏è</span>
                        <span style="font-size: 1.1rem;">{{ reserva.servico.duracao }} minutos</span>
                    </div>
                    {% endif %}
                </div>

                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(74, 158, 255, 0.2);">
                    <a href="{{ url_for('cancelar_reserva', reserva_id=reserva.id) }}" 
                       class="btn btn-danger btn-small"
                       onclick="return confirm('‚ö†Ô∏è Tem certeza que deseja cancelar este agendamento?')">
                        üóëÔ∏è CANCELAR AGENDAMENTO
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="card-form" style="text-align: center; padding: 4rem 2rem;">
            <div style="font-size: 5rem; margin-bottom: 2rem; opacity: 0.3;">üìÖ</div>
            <h2 style="color: var(--gold-light); margin-bottom: 1rem;">Nenhum Agendamento Encontrado</h2>
            <p style="color: rgba(245, 245, 220, 0.7); margin-bottom: 2rem; font-size: 1.1rem;">
                Voc√™ ainda n√£o tem agendamentos nesta barbearia.
            </p>
            <a href="{{ url_for('nova_reserva', slug=barbearia.slug) }}" class="btn btn-primary">
                ‚ûï FAZER PRIMEIRO AGENDAMENTO
            </a>
        </div>
    {% endif %}
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}