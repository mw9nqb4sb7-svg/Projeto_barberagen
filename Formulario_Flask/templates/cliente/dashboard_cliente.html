{% extends "base.html" %}
{% block title %}Meu Dashboard - Cliente{% endblock %}

{% block content %}
<!-- Navega√ß√£o -->
<nav class="custom-nav">
    <div class="nav-content">
        <div class="nav-brand">
            <span class="nav-brand-text" style="font-size: 1.5rem; font-weight: 900; font-family: 'Plus Jakarta Sans', sans-serif !important; letter-spacing: -0.5px !important; line-height: 1.2 !important; text-transform: none !important; background: transparent !important; -webkit-background-clip: unset !important; -webkit-text-fill-color: unset !important; background-clip: unset !important;">
                {% if barbearia %}
                <span style="color: #4a9eff !important; background: transparent !important; -webkit-background-clip: unset !important; -webkit-text-fill-color: #4a9eff !important;">{{ barbearia.nome.split()[0] }}</span>
                <span style="color: #ffffff !important; background: transparent !important; -webkit-background-clip: unset !important; -webkit-text-fill-color: #ffffff !important;">{{ ' '.join(barbearia.nome.split()[1:]) }}</span>
                {% else %}
                <span style="color: #4a9eff !important;">Barbearia</span>
                {% endif %}
            </span>
        </div>
        
        <!-- Bot√£o Hamb√∫rguer -->
        <div class="nav-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <ul class="nav-list">
            <li><a href="{{ url_for('nova_reserva', slug=barbearia.slug if barbearia else 'principal') }}" class="nav-link" style="color: #ffffff !important; font-family: 'Plus Jakarta Sans', sans-serif !important;">Agendar</a></li>
            <li><a href="{{ url_for('logout', slug=barbearia.slug if barbearia else 'principal') }}" class="nav-link" style="color: #ffffff !important; font-family: 'Plus Jakarta Sans', sans-serif !important;">Sair</a></li>
        </ul>
    </div>
</nav>

<!-- Container Principal -->
<div style="max-width: 1400px; margin: 0 auto; padding: 2rem;">

<!-- Agendamentos -->
<div style="background: transparent; border: 2px solid rgba(74, 158, 255, 0.2); border-radius: 20px; padding: 2.5rem; margin-bottom: 3rem; backdrop-filter: blur(10px);">
    <h2 style="color: #ffffff; font-size: 2rem; margin-bottom: 2rem; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 900; letter-spacing: -0.5px; line-height: 1.2; text-transform: none;">
        <span style="color: #4a9eff;">üìÖ</span> Meus Agendamentos
    </h2>

    {% if reservas %}
        <!-- Desktop Table -->
        <div class="table-container" style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: rgba(74, 158, 255, 0.1); border-bottom: 2px solid rgba(74, 158, 255, 0.3);">
                        <th style="padding: 1.25rem; text-align: left; color: #4a9eff; font-weight: 700; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.9rem; letter-spacing: -0.3px;">Servi√ßo</th>
                        <th style="padding: 1.25rem; text-align: left; color: #4a9eff; font-weight: 700; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.9rem; letter-spacing: -0.3px;">Data</th>
                        <th style="padding: 1.25rem; text-align: left; color: #4a9eff; font-weight: 700; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.9rem; letter-spacing: -0.3px;">Hora</th>
                        <th style="padding: 1.25rem; text-align: left; color: #4a9eff; font-weight: 700; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.9rem; letter-spacing: -0.3px;">Pre√ßo</th>
                        <th style="padding: 1.25rem; text-align: center; color: #4a9eff; font-weight: 700; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.9rem; letter-spacing: -0.3px;">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in reservas %}
                        <tr style="border-bottom: 1px solid rgba(74, 158, 255, 0.1); transition: all 0.3s ease;" onmouseover="this.style.background='rgba(74, 158, 255, 0.05)'" onmouseout="this.style.background='transparent'">
                            <td style="padding: 1.25rem; color: #ffffff; font-weight: 600; font-family: 'Plus Jakarta Sans', sans-serif;">{{ r.servico.nome if r.servico else 'N/A' }}</td>
                            <td style="padding: 1.25rem; color: rgba(255, 255, 255, 0.8); font-family: 'Plus Jakarta Sans', sans-serif;">{{ r.data }}</td>
                            <td style="padding: 1.25rem; color: #ffffff; font-weight: 600; font-family: 'Plus Jakarta Sans', sans-serif;">{{ r.hora }}</td>
                            <td style="padding: 1.25rem; color: #4a9eff; font-weight: 700; font-size: 1.1rem; font-family: 'Plus Jakarta Sans', sans-serif;">R$ {{ "%.2f"|format(r.servico.preco) if r.servico else 'N/A' }}</td>
                            <td style="padding: 1.25rem; text-align: center;">
                                <a href="{{ url_for('cancelar_reserva', reserva_id=r.id) }}" 
                                   onclick="return confirm('‚ùå Cancelar esta reserva?')"
                                   style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; background: transparent; color: #ef4444; border: 2px solid #ef4444; text-decoration: none; font-weight: 700; transition: all 0.3s ease; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.85rem; border-radius: 50px;">
                                    üóëÔ∏è Cancelar
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div style="text-align: center; padding: 3rem; background: rgba(74, 158, 255, 0.05); border-radius: 20px; border: 2px solid rgba(74, 158, 255, 0.2);">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üìã</div>
            <strong style="display: block; font-size: 1.2rem; color: #4a9eff; margin-bottom: 0.5rem; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 700;">Nenhum agendamento ainda</strong>
            <span style="color: rgba(255, 255, 255, 0.7); font-size: 1rem; font-family: 'Plus Jakarta Sans', sans-serif;">Que tal criar sua primeira reserva? √â super f√°cil!</span>
        </div>
    {% endif %}
</div>

<!-- Servi√ßos Dispon√≠veis -->
<div style="background: transparent; border: 2px solid rgba(74, 158, 255, 0.2); border-radius: 20px; padding: 2.5rem; backdrop-filter: blur(10px);">
    <h2 style="color: #ffffff; font-size: 2rem; margin-bottom: 2rem; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 900; letter-spacing: -0.5px; line-height: 1.2; text-transform: none;">
        <span style="color: #4a9eff;">üéØ</span> Servi√ßos Dispon√≠veis
    </h2>

    {% if servicos %}
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
            {% for s in servicos %}
                <div style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.8), rgba(40, 40, 40, 0.6)); border: 2px solid rgba(74, 158, 255, 0.2); border-radius: 25px; padding: 2.5rem 2rem; text-align: center; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); backdrop-filter: blur(15px); position: relative; overflow: hidden;" 
                     onmouseover="this.style.borderColor='#4a9eff'; this.style.transform='translateY(-10px) scale(1.02)'; this.style.boxShadow='0 20px 60px rgba(74, 158, 255, 0.4)'; this.style.background='linear-gradient(145deg, rgba(74, 158, 255, 0.1), rgba(40, 40, 40, 0.8))'" 
                     onmouseout="this.style.borderColor='rgba(74, 158, 255, 0.2)'; this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='none'; this.style.background='linear-gradient(145deg, rgba(26, 26, 26, 0.8), rgba(40, 40, 40, 0.6))'">
                    
                    <!-- Decora√ß√£o de fundo -->
                    <div style="position: absolute; top: -50px; right: -50px; width: 150px; height: 150px; background: radial-gradient(circle, rgba(74, 158, 255, 0.1) 0%, transparent 70%); border-radius: 50%; pointer-events: none;"></div>
                    
                    <!-- √çcone -->
                    <div style="font-size: 4rem; margin-bottom: 1.5rem; filter: drop-shadow(0 5px 15px rgba(74, 158, 255, 0.3)); transition: all 0.3s ease;" onmouseover="this.style.transform='rotate(10deg) scale(1.1)'" onmouseout="this.style.transform='rotate(0deg) scale(1)'">
                        ‚úÇÔ∏è
                    </div>
                    
                    <!-- Nome do servi√ßo -->
                    <h3 style="color: #ffffff; font-size: 1.5rem; margin-bottom: 1rem; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 800; letter-spacing: -0.5px; line-height: 1.3;">
                        {{ s.nome }}
                    </h3>
                    
                    <!-- Descri√ß√£o ou tempo estimado -->
                    <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem; margin-bottom: 1.5rem; font-family: 'Plus Jakarta Sans', sans-serif;">
                        {{ s.descricao if s.descricao else 'Servi√ßo premium de qualidade' }}
                    </p>
                    
                    <!-- Pre√ßo -->
                    <div style="background: linear-gradient(135deg, rgba(74, 158, 255, 0.2), rgba(37, 99, 235, 0.2)); border: 2px solid rgba(74, 158, 255, 0.3); border-radius: 20px; padding: 1.5rem 1rem; margin-bottom: 2rem;">
                        <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.5rem; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 600;">
                            Investimento
                        </div>
                        <div style="color: #4a9eff; font-weight: 900; font-size: 2.2rem; font-family: 'Plus Jakarta Sans', sans-serif; letter-spacing: -1px; text-shadow: 0 2px 10px rgba(74, 158, 255, 0.3);">
                            R$ {{ "%.2f"|format(s.preco) }}
                        </div>
                    </div>
                    
                    <!-- Bot√£o de agendar -->
                    <a href="{{ url_for('nova_reserva', slug=barbearia.slug if barbearia else 'principal') }}" 
                       style="display: inline-flex; align-items: center; justify-content: center; gap: 0.75rem; width: 100%; padding: 1.2rem; background: linear-gradient(135deg, #4a9eff 0%, #2563eb 100%); color: #000000; text-decoration: none; font-weight: 800; font-family: 'Plus Jakarta Sans', sans-serif; transition: all 0.3s ease; border: none; border-radius: 50px; box-shadow: 0 10px 30px rgba(74, 158, 255, 0.4); font-size: 1rem; text-transform: uppercase; letter-spacing: 0.5px;" 
                       onmouseover="this.style.background='linear-gradient(135deg, #70b4ff 0%, #4a9eff 100%)'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 15px 40px rgba(74, 158, 255, 0.6)'" 
                       onmouseout="this.style.background='linear-gradient(135deg, #4a9eff 0%, #2563eb 100%)'; this.style.transform='scale(1)'; this.style.boxShadow='0 10px 30px rgba(74, 158, 255, 0.4)'">
                        <span style="font-size: 1.2rem;">üìÖ</span>
                        Agendar Agora
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 3rem; background: rgba(245, 158, 11, 0.05); border-radius: 20px; border: 2px solid rgba(245, 158, 11, 0.2);">
            <div style="font-size: 4rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
            <strong style="display: block; font-size: 1.2rem; color: #f59e0b; margin-bottom: 0.5rem; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 700;">Nenhum servi√ßo dispon√≠vel</strong>
            <span style="color: rgba(255, 255, 255, 0.7); font-size: 1rem; font-family: 'Plus Jakarta Sans', sans-serif;">Em breve teremos novos servi√ßos para voc√™!</span>
        </div>
    {% endif %}
</div>

</div>

<style>
/* Mobile Responsivo */
@media (max-width: 768px) {
    .nav-brand {
        font-size: 1.2rem !important;
    }
    
    .nav-toggle {
        display: flex;
    }
    
    .nav-list {
        position: fixed;
        top: 0;
        right: -100%;
        height: 100vh;
        width: 280px;
        background: rgba(0, 0, 0, 0.98);
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 2rem;
        transition: right 0.3s ease;
        box-shadow: -5px 0 30px rgba(0, 0, 0, 0.9);
        border-left: 3px solid #4a9eff;
        z-index: 999;
    }
    
    .nav-list.active {
        right: 0;
    }
    
    .nav-link {
        padding: 0.8rem 1.5rem;
        font-size: 1rem;
        width: 80%;
        text-align: center;
        border: 2px solid rgba(74, 158, 255, 0.3);
        border-radius: 50px;
        transition: all 0.2s ease;
    }
    
    .nav-link:hover {
        transform: scale(1.05);
        background: rgba(74, 158, 255, 0.1);
        border-color: #4a9eff;
    }
    
    .table-container {
        overflow-x: auto;
    }
    
    .grid-3 {
        grid-template-columns: 1fr !important;
    }
    
    table {
        font-size: 0.85rem;
    }
    
    table th,
    table td {
        padding: 0.8rem 0.5rem !important;
    }
    
    /* Container principal com menos padding */
    body > div {
        padding: 1rem !important;
    }
}

@media (max-width: 480px) {
    .nav-brand-text {
        font-size: 1rem !important;
    }
    
    table {
        font-size: 0.75rem;
    }
    
    table th,
    table td {
        padding: 0.6rem 0.3rem !important;
    }
}
</style>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}
